{% extends "base.html" %}
{% load static %}
{% load thumbnail %}
{% load i18n %}
{% load humanize %}

{% block title %}Genesis | Rent{% endblock title %}

{% block content %}
<section class="text-gray-600 body-font bg-gray-100">
<div class="flex flex-wrap">
<!--Search bar -->
{% include "properties/properties_rent_mainFilters.html" %}
<!--end of search bar-->
<div class="lg:w-12/12 w-full bg-gray-300 shadow-inner">
{% include "properties/properties_rent_orderFilters.html" %}
  <div class="container max-w-full px-4 lg:px-10 py-10 mx-auto">
    {% for rent in rentProperties %}
    <div class="md:mb-10 mt-0">
    <a href="#{{rent.pk}}" id="{{rent.pk}}"></a>
    </div>
    <div class="flex flex-wrap pb-8">
      <div class="xl:w-3/12 lg:w-4/12 w-full bg-white">
        <div class="h-full overflow-hidden rounded-tl rounded-tr sm:rounded-tr-none ">
           <div class="w-full float-left py-1 text-sm pl-2 font-bold tracking-widest bg-gradient-to-r from-blue-600 to-blue-500 h-8">
              {% if rent.property_category == 'STANDARD' %}
                <div class="text-white">
                  {{rent.property_category}}
                </div>
              {% elif rent.property_category == 'FEATURED' %}
                <div class="text-white text-lg tracking-widest">
                  {{rent.property_category}} <i class="text-red-600 fa fa-star"></i>
                </div> 
              {% else %}
                <div class="text-white text-lg tracking-widest">
                  {{rent.property_category}} <i class="text-yellow-400 fa fa-bolt"></i>
                </div> 
              {% endif %}
            </div> 
          <div class="fotorama" data-loop="true" data-fit="cover" data-nav="thumbs" data-width="100%" data-trackpad="true" data-ratio="476/317" data-thumbheight="50px">
            {% if rent.photo_main  %}
              {% thumbnail rent.photo_main "476x317" as im %}
                  <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" alt="main_photo{{rent.admin_2_en}}">
              {% endthumbnail %}
            {% endif %}
            {% if rent.photo_1  %}
              {% thumbnail rent.photo_1 "476x317" as im %}
                <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}"  alt="photo1{{rent.admin_2_en}}">
              {% endthumbnail %}
            {% endif %}
            {% if rent.photo_2  %}
              {% thumbnail rent.photo_2 "476x317" as im %}
                <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}"  alt="photo2{{rent.admin_2_en}}">
              {% endthumbnail %}
            {% endif %}          
            {% if rent.photo_3 %}
              {% thumbnail rent.photo_3 "476x317" as im %}
                <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}"  alt="photo3{{rent.admin_2_en}}">
              {% endthumbnail %}
            {% endif %}  
            {% if rent.photo_4  %}
              {% thumbnail rent.photo_4 "476x317" as im %}
                <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" alt="photo4{{rent.admin_2_en}}">
              {% endthumbnail %}                         
            {% endif %}

          </div> 
        </div>
      </div>
      <div class="lg:w-5/12 bg-white overflow-hidden rounded-tr-none sm:rounded-tr">
        <div class="h-full overflow-hidden">
          <div class="w-full h-8 float-left py-1 text-xs pl-2 font-bold rentlist-ribbon bg-gradient-to-r from-blue-500 to-blue-400">
            <a href="#">
              <i title="{% trans 'Hide this advertisment'%}" class="fa fa-times float-right text-base text-white px-4 transition duration-150 ease-in-out transform hover:scale-125"></i>
            </a>
            <a href="#">
              <i title="{% trans 'Save the property'%}" class="float-right fa fa-heart text-base text-pink-600 px-4 transition duration-150 ease-in-out transform hover:scale-125"></i>
            </a>
            <i title="show on map" class="text-gray-700 float-right font-bold fa fa-map-marker text-xl cursor-pointer hover:text-black px-4 -mt-1" onmouseenter="markerOnMap({{rent.pk}})"></i>
          </div>
          <div class="p-4">
            <a href="{% url 'properties:rent-detail' rent.pk %}" rel="noopener">
              <div class="flex items-center flex-wrap w-full pt-4">
                <h2 class="inline-flex items-center tracking-widest text-xs title-font font-medium text-blue-600">
                  {{rent.admin_2}} | {{rent.postalcode}} | {{rent.admin_3}} | {{rent.country}}
                </h2>
                <h1 class="inline-flex items-center title-font font-bold text-2xl ml-auto leading-none text-gray-900">
                    {% ifequal rent.currency '€' %}
                      {{rent.price | intcomma}}{{rent.currency}}
                    {% else %}
                      {{rent.currency}}{{rent.price | intcomma}}
                    {% endifequal %}
                </h1>
              </div>
            </a>
            <a href="{% url 'properties:rent-detail' rent.pk %}" rel="noopener">
              <h1 class="title-font text-md font-bold text-gray-700 mb-2">
                {{rent.address}} {{rent.street_number}} 
                {% if rent.admin_1 != '' %} 
                , {{rent.admin_1}}
                {% endif %}
              </h1>
            </a>
            <div class="flex flex-wrap my-2">
              <div class="w-full md:pr-6">
                <a href="{% url 'properties:rent-detail' rent.pk %}" rel="noopener">
                  <p class="text-gray-900 text-sm mb-4 lg:mb-2 overflow-hidden">
                    {{rent.short_description}}
                  </p>
                </a>
              </div>
              
            </div> 
            <a href="{% url 'properties:rent-detail' rent.pk %}" rel="noopener">
              <div class="flex flex-wrap text-sm text-gray-800 my-2">
                <div class="flex justify-between w-full my-2 lg:my-2 tracking-wider text-xs">
                  <div><i class="fa fa-home"></i> {% trans 'TYPE'%}<div class="text-center font-bold">{% trans rent.property_type %}</div></div>
                  <div><i class="fa fa-bed"></i> {% trans 'BEDROOMS'%}<div class="text-center font-bold">{{rent.bedrooms}}</div></div>
                  <div><i class="fa fa-bath"></i> {% trans 'BATHROOMS'%}<div class="text-center font-bold">{{rent.bathrooms|floatformat:'0'}}</div></div>
                  <div><i class="fa fa-th-large"></i> {% trans 'SPACE'%}<div class="text-center font-bold">{{rent.m2}}m²</div></div>
                </div>
                <div class="flex justify-between w-full my-2">
                  <p class="text-xs font-bold leading-none ml-auto">{% trans 'Published:'%} {{rent.list_date|date:"d/m/Y"}}</p>
                </div>
              </div>
            </a>
            <hr class="my-4">
            <div class="flex items-center flex-wrap text-sm">
              <a href="https://mail.google.com/mail/?view=cm&fs=1&tf=1&to={{rent.organisation.email}}" 
                 target="popup" 
                 onclick="window.open('https://mail.google.com/mail/?view=cm&fs=1&tf=1&to={{rent.organisation.email}}','popup','width=600,height=600'); return false;"
                 class="py-2 px-3 border-r border-white rounded-l text-center text-white transition duration-75 ease-in-out bg-blue-600 hover:bg-blue-700 inline-flex items-center md:mb-2 lg:mb-0">
                <i class="fa fa-envelope pr-2"></i>EMAIL
              </a>
              <a href="tel:{{rent.organisation.phone}}" class="py-2 px-4 rounded-r text-center text-white transition duration-75 ease-in-out bg-blue-600 hover:bg-blue-700 inline-flex items-center md:mb-2 lg:mb-0">
                <i class="fa fa-phone pr-2"></i>{% trans 'CALL'%}
              </a>
              <a class="inline-flex items-center  ml-auto leading-none text-xs">
                {% if rent.organisation.organisation_logo %}
                  <img alt="blog" width="12" height="8" src="{{rent.organisation.organisation_logo.url}}" class="w-12 h-8 flex-shrink-0 object-cover object-center sidebar">
                {% endif %}
                <span class="flex-grow flex flex-col pl-4">
                  <span class="title-font text-sm font-medium text-gray-900">{{rent.organisation.name}}</span>
                  <span class="text-gray-700 text-xs tracking-widest mt-0.5">{% trans 'AGENCY'%}</span>
                </span>
              </a>
            </div>
          </div>
        </div>
      </div>
      {% if forloop.counter < 2 %}
        <div class="xl:w-4/12 lg:w-3/12 sidebar">
          <div class="pl-10 fixed rentMapTop lg:w-3/12 xl:w-4/12 mt-8 xl:mt-0" id="rentMap">
            <div class="w-full rounded lg:mb-0 mb-4 rent_map" id="map" style="height:100%;"></div>
            <div class="text-xs text-gray-600 float-right font-semibold">
              <a href="https://leafletjs.com">Leaflet | </a>
              <a href="https://www.maptiler.com/copyright/">&copy;MapTiler </a>
              <a href="https://www.openstreetmap.org/copyright">&copy;OpenStreetMap</a>
              contributors
            </div> 
          </div>
        </div>
      {% endif %}
    </div>
    {% endfor %}
    <!-- Pagination -->
    {% include "properties/properties_rent_pagination.html" %}
    <!-- end of pagination -->
  </div>
</div>
</div>
</section>
{% include "properties/scripts/properties_listMap.html" %}
{% include "properties/scripts/properties_landing_autocomplete.html" %}
{% endblock content %}